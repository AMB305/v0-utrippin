-- Create ai_trips table for AI Travel system
CREATE TABLE public.ai_trips (
  id UUID NOT NULL DEFAULT gen_random_uuid() PRIMARY KEY,
  name TEXT NOT NULL,
  start_date DATE,
  end_date DATE,
  summary TEXT,
  flights_url TEXT,
  hotels_url TEXT,
  event_name TEXT,
  event_date DATE,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),
  updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()
);

-- Enable Row Level Security
ALTER TABLE public.ai_trips ENABLE ROW LEVEL SECURITY;

-- Create policy for public read access
CREATE POLICY "AI trips are publicly readable" 
ON public.ai_trips 
FOR SELECT 
USING (true);

-- Create policy for service role to manage trips
CREATE POLICY "Service role can manage ai trips" 
ON public.ai_trips 
FOR ALL 
USING (true);

-- Create trigger for automatic timestamp updates
CREATE TRIGGER update_ai_trips_updated_at
BEFORE UPDATE ON public.ai_trips
FOR EACH ROW
EXECUTE FUNCTION public.update_updated_at_column();

-- Insert 50+ sample trips with events and affiliate URLs
INSERT INTO public.ai_trips (name, start_date, end_date, summary, flights_url, hotels_url, event_name, event_date) VALUES
('Miami', '2025-11-06', '2025-11-10', 'Weekend getaway in sunny Miami with beaches & nightlife.', 
 'https://www.expedia.com/Flights-Search?destination=Miami&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Miami&camref=1110l15dQSW',
 'Beach Polo World Cup', '2025-11-06'),
('Paris', '2025-07-05', '2025-07-10', 'Summer in Paris — fashion, cafes & romance.',
 'https://www.expedia.com/Flights-Search?destination=Paris&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Paris&camref=1110l15dQSW',
 'Paris Haute Couture Week', '2025-07-07'),
('New Orleans', '2025-05-01', '2025-05-05', 'Live jazz & great food in New Orleans.',
 'https://www.expedia.com/Flights-Search?destination=New Orleans&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=New Orleans&camref=1110l15dQSW',
 'New Orleans Jazz Festival', '2025-05-01'),
('Tokyo', '2025-04-01', '2025-04-07', 'Cherry blossoms and modern culture in Japan.',
 'https://www.expedia.com/Flights-Search?destination=Tokyo&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Tokyo&camref=1110l15dQSW',
 'Cherry Blossom Festival', '2025-04-01'),
('Barcelona', '2025-08-15', '2025-08-20', 'Art, architecture, and Mediterranean vibes.',
 'https://www.expedia.com/Flights-Search?destination=Barcelona&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Barcelona&camref=1110l15dQSW',
 'La Mercè Festival', '2025-08-15'),
('Rio de Janeiro', '2025-02-20', '2025-02-25', 'Carnival magic and iconic beaches.',
 'https://www.expedia.com/Flights-Search?destination=Rio de Janeiro&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Rio de Janeiro&camref=1110l15dQSW',
 'Rio Carnival', '2025-02-22'),
('London', '2025-06-10', '2025-06-15', 'Royal heritage meets modern innovation.',
 'https://www.expedia.com/Flights-Search?destination=London&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=London&camref=1110l15dQSW',
 'Trooping the Colour', '2025-06-14'),
('Iceland', '2025-03-01', '2025-03-07', 'Northern lights and dramatic landscapes.',
 'https://www.expedia.com/Flights-Search?destination=Reykjavik&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Reykjavik&camref=1110l15dQSW',
 'Winter Lights Festival', '2025-03-01'),
('Bali', '2025-09-01', '2025-09-08', 'Tropical paradise with temples and beaches.',
 'https://www.expedia.com/Flights-Search?destination=Bali&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Bali&camref=1110l15dQSW',
 'Galungan Festival', '2025-09-03'),
('Dubai', '2025-12-01', '2025-12-06', 'Luxury shopping and futuristic architecture.',
 'https://www.expedia.com/Flights-Search?destination=Dubai&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Dubai&camref=1110l15dQSW',
 'Dubai Shopping Festival', '2025-12-01'),
('Mexico City', '2025-11-01', '2025-11-04', 'Rich culture and Day of the Dead celebrations.',
 'https://www.expedia.com/Flights-Search?destination=Mexico City&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Mexico City&camref=1110l15dQSW',
 'Día de los Muertos', '2025-11-01'),
('Thailand', '2025-04-10', '2025-04-17', 'Temples, beaches, and water festival fun.',
 'https://www.expedia.com/Flights-Search?destination=Bangkok&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Bangkok&camref=1110l15dQSW',
 'Songkran Water Festival', '2025-04-13'),
('Morocco', '2025-05-15', '2025-05-22', 'Desert adventures and ancient medinas.',
 'https://www.expedia.com/Flights-Search?destination=Marrakech&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Marrakech&camref=1110l15dQSW',
 'Rose Festival', '2025-05-15'),
('Greece', '2025-08-01', '2025-08-08', 'Island hopping and ancient history.',
 'https://www.expedia.com/Flights-Search?destination=Athens&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Athens&camref=1110l15dQSW',
 'Assumption of Mary Festival', '2025-08-15'),
('South Korea', '2025-10-01', '2025-10-08', 'K-culture and autumn leaves.',
 'https://www.expedia.com/Flights-Search?destination=Seoul&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Seoul&camref=1110l15dQSW',
 'Seoul Lantern Festival', '2025-10-01'),
('Peru', '2025-06-20', '2025-06-27', 'Machu Picchu and Inca heritage.',
 'https://www.expedia.com/Flights-Search?destination=Lima&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Lima&camref=1110l15dQSW',
 'Inti Raymi Festival', '2025-06-24'),
('Australia', '2025-01-15', '2025-01-22', 'Sydney opera house and coastal beauty.',
 'https://www.expedia.com/Flights-Search?destination=Sydney&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Sydney&camref=1110l15dQSW',
 'Sydney Festival', '2025-01-15'),
('Vietnam', '2025-02-10', '2025-02-17', 'Pho, history, and stunning landscapes.',
 'https://www.expedia.com/Flights-Search?destination=Ho Chi Minh City&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Ho Chi Minh City&camref=1110l15dQSW',
 'Tet Festival', '2025-02-12'),
('India', '2025-03-10', '2025-03-17', 'Colors, spices, and ancient temples.',
 'https://www.expedia.com/Flights-Search?destination=Delhi&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Delhi&camref=1110l15dQSW',
 'Holi Festival', '2025-03-13'),
('Egypt', '2025-10-15', '2025-10-22', 'Pyramids and Nile river cruises.',
 'https://www.expedia.com/Flights-Search?destination=Cairo&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Cairo&camref=1110l15dQSW',
 'Abu Simbel Sun Festival', '2025-10-22'),
('Turkey', '2025-04-20', '2025-04-27', 'Hot air balloons and Turkish delights.',
 'https://www.expedia.com/Flights-Search?destination=Istanbul&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Istanbul&camref=1110l15dQSW',
 'Tulip Festival', '2025-04-20'),
('Argentina', '2025-03-15', '2025-03-22', 'Tango, wine, and Patagonian wonders.',
 'https://www.expedia.com/Flights-Search?destination=Buenos Aires&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Buenos Aires&camref=1110l15dQSW',
 'Tango Festival', '2025-03-15'),
('Nepal', '2025-10-10', '2025-10-17', 'Himalayan peaks and spiritual journeys.',
 'https://www.expedia.com/Flights-Search?destination=Kathmandu&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Kathmandu&camref=1110l15dQSW',
 'Dashain Festival', '2025-10-12'),
('Jordan', '2025-05-05', '2025-05-12', 'Petra wonders and desert landscapes.',
 'https://www.expedia.com/Flights-Search?destination=Amman&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Amman&camref=1110l15dQSW',
 'Jordan Festival', '2025-05-05'),
('Chile', '2025-12-15', '2025-12-22', 'Wine valleys and Atacama desert.',
 'https://www.expedia.com/Flights-Search?destination=Santiago&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Santiago&camref=1110l15dQSW',
 'Chilean Independence Day', '2025-09-18'),
('Canada', '2025-07-01', '2025-07-08', 'Natural beauty and friendly culture.',
 'https://www.expedia.com/Flights-Search?destination=Toronto&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Toronto&camref=1110l15dQSW',
 'Canada Day', '2025-07-01'),
('Philippines', '2025-01-20', '2025-01-27', 'Tropical islands and warm hospitality.',
 'https://www.expedia.com/Flights-Search?destination=Manila&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Manila&camref=1110l15dQSW',
 'Sinulog Festival', '2025-01-19'),
('Colombia', '2025-02-28', '2025-03-07', 'Coffee culture and Caribbean coast.',
 'https://www.expedia.com/Flights-Search?destination=Bogota&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Bogota&camref=1110l15dQSW',
 'Barranquilla Carnival', '2025-03-01'),
('Portugal', '2025-06-01', '2025-06-08', 'Coastal charm and historic cities.',
 'https://www.expedia.com/Flights-Search?destination=Lisbon&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Lisbon&camref=1110l15dQSW',
 'Festival de Sintra', '2025-06-01'),
('Croatia', '2025-07-15', '2025-07-22', 'Adriatic coast and medieval towns.',
 'https://www.expedia.com/Flights-Search?destination=Dubrovnik&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Dubrovnik&camref=1110l15dQSW',
 'Dubrovnik Summer Festival', '2025-07-15'),
('Malaysia', '2025-08-25', '2025-09-01', 'Multicultural cities and rainforests.',
 'https://www.expedia.com/Flights-Search?destination=Kuala Lumpur&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Kuala Lumpur&camref=1110l15dQSW',
 'Malaysia Day', '2025-09-16'),
('Kenya', '2025-07-20', '2025-07-27', 'Safari adventures and Maasai culture.',
 'https://www.expedia.com/Flights-Search?destination=Nairobi&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Nairobi&camref=1110l15dQSW',
 'Great Migration', '2025-07-20'),
('Indonesia', '2025-04-25', '2025-05-02', 'Volcanic islands and cultural diversity.',
 'https://www.expedia.com/Flights-Search?destination=Jakarta&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Jakarta&camref=1110l15dQSW',
 'Waisak Day', '2025-05-12'),
('Czech Republic', '2025-05-30', '2025-06-06', 'Fairytale castles and Prague charm.',
 'https://www.expedia.com/Flights-Search?destination=Prague&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Prague&camref=1110l15dQSW',
 'Prague Spring Festival', '2025-05-30'),
('Israel', '2025-04-05', '2025-04-12', 'Holy sites and modern innovation.',
 'https://www.expedia.com/Flights-Search?destination=Tel Aviv&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Tel Aviv&camref=1110l15dQSW',
 'Passover', '2025-04-13'),
('Russia', '2025-06-25', '2025-07-02', 'Red Square and Trans-Siberian adventure.',
 'https://www.expedia.com/Flights-Search?destination=Moscow&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Moscow&camref=1110l15dQSW',
 'White Nights Festival', '2025-06-25'),
('New Zealand', '2025-02-05', '2025-02-12', 'Middle-earth landscapes and adventure sports.',
 'https://www.expedia.com/Flights-Search?destination=Auckland&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Auckland&camref=1110l15dQSW',
 'Waitangi Day', '2025-02-06'),
('Norway', '2025-01-10', '2025-01-17', 'Northern lights and fjord cruises.',
 'https://www.expedia.com/Flights-Search?destination=Oslo&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Oslo&camref=1110l15dQSW',
 'Northern Lights Season', '2025-01-10'),
('South Africa', '2025-03-20', '2025-03-27', 'Safari and wine country adventures.',
 'https://www.expedia.com/Flights-Search?destination=Cape Town&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Cape Town&camref=1110l15dQSW',
 'Cape Town Jazz Festival', '2025-03-28'),
('Hungary', '2025-08-10', '2025-08-17', 'Thermal baths and Danube river cruises.',
 'https://www.expedia.com/Flights-Search?destination=Budapest&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Budapest&camref=1110l15dQSW',
 'Sziget Festival', '2025-08-10'),
('Ecuador', '2025-11-15', '2025-11-22', 'Galápagos islands and Andes mountains.',
 'https://www.expedia.com/Flights-Search?destination=Quito&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Quito&camref=1110l15dQSW',
 'Quito Independence Day', '2025-12-06'),
('Cuba', '2025-12-20', '2025-12-27', 'Classic cars and salsa rhythms.',
 'https://www.expedia.com/Flights-Search?destination=Havana&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Havana&camref=1110l15dQSW',
 'Havana Jazz Festival', '2025-12-20'),
('Ethiopia', '2025-09-10', '2025-09-17', 'Coffee origins and ancient history.',
 'https://www.expedia.com/Flights-Search?destination=Addis Ababa&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Addis Ababa&camref=1110l15dQSW',
 'Meskel Festival', '2025-09-27'),
('Myanmar', '2025-11-25', '2025-12-02', 'Golden pagodas and river cruises.',
 'https://www.expedia.com/Flights-Search?destination=Yangon&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Yangon&camref=1110l15dQSW',
 'Festival of Lights', '2025-11-25'),
('Latvia', '2025-06-15', '2025-06-22', 'Baltic charm and medieval old towns.',
 'https://www.expedia.com/Flights-Search?destination=Riga&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Riga&camref=1110l15dQSW',
 'Midsummer Festival', '2025-06-24'),
('Bolivia', '2025-08-05', '2025-08-12', 'Salt flats and high-altitude adventures.',
 'https://www.expedia.com/Flights-Search?destination=La Paz&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=La Paz&camref=1110l15dQSW',
 'Bolivia Independence Day', '2025-08-06'),
('Kazakhstan', '2025-09-25', '2025-10-02', 'Silk Road heritage and modern cities.',
 'https://www.expedia.com/Flights-Search?destination=Almaty&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Almaty&camref=1110l15dQSW',
 'Apple Festival', '2025-09-25'),
('Ghana', '2025-03-25', '2025-04-01', 'West African culture and golden beaches.',
 'https://www.expedia.com/Flights-Search?destination=Accra&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Accra&camref=1110l15dQSW',
 'Independence Day', '2025-03-06'),
('Uruguay', '2025-01-25', '2025-02-01', 'Gaucho culture and Atlantic coastline.',
 'https://www.expedia.com/Flights-Search?destination=Montevideo&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Montevideo&camref=1110l15dQSW',
 'Carnival', '2025-02-24'),
('Uzbekistan', '2025-04-15', '2025-04-22', 'Silk Road cities and Islamic architecture.',
 'https://www.expedia.com/Flights-Search?destination=Tashkent&camref=1110l15dQSW',
 'https://www.expedia.com/Hotel-Search?destination=Tashkent&camref=1110l15dQSW',
 'Navruz Festival', '2025-03-21');
